@model DLTD.Web.Main.ViewModels.ListTonghopVanBanChiDaoViewModel
@section header{
    <i class="glyphicon glyphicon-tasks">&nbsp;</i>@Model.strloaivanban
}
@using DLTD.Web.Main.Common
@using DLTD.Web.Main.ViewModels
@using Kendo.Mvc.UI
<div class="box ">
    <header>
        <nav class="box-toolbar">
            <button id="XLVBbtn" disabled class="btn btn-metis-4 btn-sm btn-primary btn-flat button-box">
                <i class="glyphicon glyphicon-pencil"></i>&nbsp;Xử lý
            </button>
            <button id="PrintListVBbtn" type="button" class="btn btn-sm btn-primary btn-flat button-box">
                <i class="glyphicon glyphicon-print"></i>&nbsp;In&nbsp;
            </button>
            <button id="Backbtn" type="button" class="btn btn-sm btn-primary btn-flat " data-original-title="" title=""><i class="glyphicon glyphicon-arrow-left"></i>&nbsp;Quay lại</button>
        </nav>
    </header>
</div>
@(Html.Kendo().Grid<VanBanChiDaoViewModel>()
      .Name("grid")
      .Columns(columns =>
      {
          columns.Bound(p => p.Id).Visible(false);
          columns.Bound(p => p.LinkFileDinhKem).Visible(false);
          columns.Bound(p => p.FileDinhKem)
               .ClientTemplate(
            "#if (FileDinhKem > 1) { #" +
                "<a href='javascript:void(0);' onclick='openAttachments(" + "#= Id #" + ");'>" + "<i class='glyphicon glyphicon-paperclip'></i>" + "</a>" +
            "# } else if (FileDinhKem == 1) { #" +
                "<a href='" + "#= LinkFileDinhKem #" + "'>" + "<i class='glyphicon glyphicon-paperclip'></i>" + "</a>" +
            "# } else { #" +

            "# } #"
           ).Width(30);
          columns.Bound(p => p.SoKH).Width(90);
          columns.Bound(p => p.Ngayky).Width(90);
          columns.Bound(p => p.Trichyeu).Width(200);
          columns.Bound(p => p.TenDonVi).Width(150);
          columns.Bound(p => p.NguoiGui).Width(120);
          columns.Bound(p => p.YKienChiDao);
          columns.Bound(p => p.ThoiHanXuLy).Width(90);
          columns.Bound(p => p.DoKhan).Width(80);
          columns.Bound(p => p.TrangThaiVB).Width(100);
      })
      .Pageable(
          pageable => pageable
              .Refresh(true)
              //.PageSizes(true)
              .ButtonCount(5)
              .Messages(ms => ms.Display(KendoGridDisplay.PageDisplay).Empty(KendoGridDisplay.PageEmpty)
                  .First(KendoGridDisplay.PageFirst).Previous(KendoGridDisplay.PagePrevious)
                  .Next(KendoGridDisplay.PageNext).Last(KendoGridDisplay.PageLast))
      )
      .Scrollable()
      .Selectable(s => s.Type(GridSelectionType.Row).Mode(GridSelectionMode.Single))
      .Resizable(resize => resize.Columns(true))
      .HtmlAttributes(new { style = "height:100%;" })
      .DataSource(dataSource => dataSource
          .Ajax()
          //.Group(g=>g.Add(x=>x.Trichyeu))
          .PageSize(10)
          .Read(read => read.Action("GetVanBanChiDao", "TinhHinhXL", new { search = ViewBag.SearchText, trangThai = ViewBag.TrangThai }))
      )
    .Events(events => events.Change("gridSelected").DataBound("gridDataBound"))

)
