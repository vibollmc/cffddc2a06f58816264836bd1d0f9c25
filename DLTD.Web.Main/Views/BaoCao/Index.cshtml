@using DLTD.Web.Main.Controllers
@using Microsoft.Reporting.WebForms;
@using MvcReportViewer;
@using Report = DLTD.Web.Main.Controllers.Report
@model DLTD.Web.Main.ViewModels.BaoCaoVanBanChiDaoViewModel

<div class="row">
    <div class="col-lg-12">
        <ol class="breadcrumb">
            <li><i class="glyphicon glyphicon-home"></i><a href="/"> Nhiệm vụ</a></li>
            @*<li><i class="fa fa-bars"></i>Pages</li>*@
            <li><i class="glyphicon glyphicon-list"></i>@(Model.Report == Report.ChiTiet ? "Báo cáo chi tiết" : "Báo cáo tổng hợp")</li>
        </ol>
    </div>
</div>
@using(Html.BeginForm("Index", "BaoCao", FormMethod.Post)){
    <div class="row">
        <div class="col-lg-3">
            <div class="form-group">
                <label class="control-label">Từ ngày</label>
                <input name="TuNgay" class="form-control" id="TuNgay" value="@Model.FromDate">
            </div>
        </div>
        <div class="col-lg-3">
            <div class="form-group">
                <label class="control-label">Đến ngày</label>
                <input name="DenNgay" class="form-control" id="DenNgay" value="@Model.ToDate">
            </div>
        </div>
        <div class="col-lg-6">
            <div class="form-group">
                <button type="submit" class="btn btn-primary">Xuất báo cáo</button>
            </div>
        </div>
    </div>
    <hr/>
}


<script type="text/javascript">
    
    $("#TuNgay").kendoDatePicker({culture:"vi-VN"});
    $("#DenNgay").kendoDatePicker({ culture: "vi-VN"});
</script>

@(Html.MvcReportViewerFluent(Model.ReportPath)
.ProcessingMode(ProcessingMode.Local)
.LocalDataSource(Model.ReportDataString, Model.Data)
.ReportParameters(new {ReportDate = Model.ReportDate, FromDate = Model.FromDate, ToDate = Model.ToDate})
.Attributes(new {Height = "600", Width = "100%", style = "border: 1px"})
.Method(FormMethod.Post)
)
